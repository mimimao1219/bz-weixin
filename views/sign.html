<!DOCTYPE html>
<html class="ui-page-login">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<title></title>
	<link href="../public/stylesheets/mui.min.css" rel="stylesheet" />

	<style>
		.area {
			margin: 20px auto 0px auto;
		}
		
		.mui-input-group:first-child {
			margin-top: 20px;
		}
		
		.mui-input-group label {
			width: 36%;
		}
		
		.mui-input-row label~input,
		.mui-input-row label~select,
		.mui-input-row label~textarea {
			width: 64%;
		}
		
		.mui-checkbox input[type=checkbox],
		.mui-radio input[type=radio] {
			top: 6px;
		}
		
		.mui-content-padded {
			margin-top: 25px;
		}
		
		.mui-btn {
			padding: 10px;
		}
	</style>
</head>

<body>
	<header class="mui-bar mui-bar-nav">

		<h1 class="mui-title">绑定手机登陆</h1>
	</header>
	<div class="mui-content">
		<form class="mui-input-group" action='/login' method='post'>
			<input type='hidden' name='_csrf' value='<%= csrf %>'>
			<input type='hidden' id='openid' name='openid' value='<%=openid %>'>
			<input type='hidden' id='tid' name='tid' value=''>
			<div class="mui-radio" style="  border-bottom: 1px solid #E1E2E3;  height: 60px;     padding: 15px 15px; margin-bottom: 10px;">
<!--
				<div style=" float: left;padding-right: 20px; ">
					<input onclick="sel(1)" checked name="usertype" type="radio" value='1' style="left: 0px; position: static;">
					<label style="width: 150px; display: inline; padding-right: 0px;">员工</label>
				</div>-->
				<div style=" float: left; padding-right: 20px;">
					<input onclick="sel(2)" checked name="usertype" type="radio" value='3' style="left: 0px; position: static;">
					<label style="width: 150px; display: inline; padding-right: 0px;">维修公司</label>
				</div>
				<div style="float: left;">
					<input onclick="sel(2)" name="usertype" type="radio" value='4' style="left: 0px; position: static;">
					<label style="width: 150px; display: inline; padding-right: 0px;">维修人员</label>
				</div>

			</div>
			<div class="mui-input-row" id='select2' >
				<label>手机号：</label>
				<input id='mob' name='mob' type="text" class="mui-input-clear mui-input" placeholder="请输入手机号">
			</div>
<!--
			<div class="mui-input-row" id='select1'>

				<label>工号：</label>
				<input id='userid' name='userid' type="text" class="mui-input-clear mui-input" placeholder="请输入工号">
			</div>
				<div class="mui-input-row">
					<label>验证码：</label>
					<input id='yzm' name='yzm' type="text" class="mui-input-clear mui-input" placeholder="请输入验证码">
				</div> -->

			<div class="mui-content-padded">
				<button type="submit" class="mui-btn mui-btn-block mui-btn-primary">提交</button>
			</div>
		</form>
		<% if (err==1) { %>
			<div class="mui-content-padded oauth-area">
				<span>请填写正确的手机号或工号！如无法登入请联系您的上一级。</span>
			</div>
			<% } %>

	</div>
</body>
<script src="../public/javascripts/zepto.min.js"></script>
	<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	<script type="text/javascript">
		// 使用 jq 动态加载 微信配置
		$.ajax({
		    url: '/getsignature' ,// 此处url请求地址需要替换成你自己实际项目中服务器数字签名服务地址		        
		    type: 'post',
		    data: {
		        url: location.href.split('#')[0] // 将当前URL地址上传至服务器用于产生数字签名
		    },
		    success: function(r){
			// 开始配置微信JS-SDK
		    wx.config({
		        debug: false,
		        appId: r.appId,
		        timestamp: r.timestamp,
		        nonceStr: r.nonceStr,
		        signature: r.signature,
		        jsApiList: ['checkJsApi','chooseImage','scanQRCode','previewImage','uploadImage','downloadImage','hideOptionMenu']
		    });
		  },
		  error: function(xhr, type){
		    alert('微信js-sdk认证失败!')
		  }		    
		});
			//通过ready接口处理成功验证
			wx.ready(function(){			
				wx.hideOptionMenu();		
			});

		</script>
		<script type="text/javascript">
	// 对浏览器的UserAgent进行正则匹配，不含有微信独有标识的则为其他浏览器
	var useragent = navigator.userAgent;
	if (useragent.match(/MicroMessenger/i) != 'MicroMessenger') {
		// 这里警告框会阻塞当前页面继续加载
		alert('已禁止本次访问：您必须使用微信内置浏览器访问本页面！');
		// 以下代码是用javascript强行关闭当前页面
		var opened = window.open('about:blank', '_self');
		opened.opener = null;
		opened.close();
	}
</script>
<script type="text/javascript">
	function sel(cs) {
		if (cs == 1) {
			//document.getElementById('select1').style.display = "inline";
			//document.getElementById('select2').style.display = "none";
		}
		if (cs == 2) {
			//document.getElementById('select1').style.display = "none";
			//document.getElementById('select2').style.display = "inline";
		}
	};
</script>


</html>